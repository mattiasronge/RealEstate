{"remainingRequest":"/Users/mattiasronge/Desktop/richar/Admin/node_modules/babel-loader/lib/index.js!/Users/mattiasronge/Desktop/richar/Admin/node_modules/eslint-loader/index.js??ref--13-0!/Users/mattiasronge/Desktop/richar/Admin/src/store/modules/api_product.js","dependencies":[{"path":"/Users/mattiasronge/Desktop/richar/Admin/src/store/modules/api_product.js","mtime":1577204960242},{"path":"/Users/mattiasronge/Desktop/richar/Admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mattiasronge/Desktop/richar/Admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mattiasronge/Desktop/richar/Admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport axios from 'axios';\nvar url = process.env.VUE_APP_BACKEND_URL + \"api/productapi\";\nvar delete_img_url = process.env.VUE_APP_BACKEND_URL + \"api/delete\";\nvar imageBaseUrl = process.env.VUE_APP_BACKEND_URL + 'images/';\nvar state = {\n  products: [],\n  product: {\n    type: '',\n    location: '',\n    area: '',\n    ref_key: '',\n    bathroom: '',\n    bedroom: '',\n    square: '',\n    outside: '',\n    images: []\n  }\n}; // getters\n\nvar getters = {}; // mutations\n\nvar mutations = {\n  getProducts: function getProducts(state, posts) {\n    state.products = posts;\n  },\n  getProduct: function getProduct(state, post) {\n    state.product = post;\n    if (post.location._id) state.product.location = post.location._id;\n    if (post.area._id) state.product.area = post.area._id;\n    if (post.type._id) state.product.type = post.type._id;\n  },\n  emptyProduct: function emptyProduct(state) {\n    state.product = {\n      type: '',\n      location: '',\n      area: '',\n      ref_key: '',\n      bathroom: '',\n      bedroom: '',\n      square: '',\n      outside: '',\n      images: []\n    };\n  },\n  addProductImage: function addProductImage(state, img) {\n    state.product.images.push(imageBaseUrl + img);\n  },\n  removeProductImage: function removeProductImage(state, img) {\n    state.product.images.splice(state.product.images.indexOf(img), 1);\n  }\n}; // actions\n\nvar actions = {\n  getProducts: function getProducts(_ref) {\n    var commit = _ref.commit;\n    axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n    axios.get(url).then(function (response) {\n      //console.log(response.data);\n      commit('getProducts', response.data);\n    });\n  },\n  getProduct: function getProduct(context, params) {\n    axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n    axios.get(url + '/' + params.id).then(function (response) {\n      context.commit('getProduct', response.data);\n    });\n  },\n  emptyProduct: function emptyProduct(_ref2) {\n    var commit = _ref2.commit;\n    commit('emptyProduct');\n  },\n  deleteProduct: function deleteProduct(_ref3, params) {\n    var dispatch = _ref3.dispatch;\n    axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n    axios.delete(url + '/' + params.id).then(function (response) {\n      dispatch('getProducts', response.data);\n    });\n  },\n  saveProduct: function saveProduct(_ref4, params) {\n    var dispatch = _ref4.dispatch;\n\n    // console.log('=== save product ===');\n    // console.log(state.product);\n    if (params.id && params.id != '') {\n      //edit product\n      axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n      axios.put(url + '/' + params.id, state.product).then(function (response) {\n        dispatch('getProducts', response.data);\n      });\n    } else {\n      //insert product\n      axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n      axios.post(url, state.product).then(function (response) {\n        dispatch('getProducts', response.data);\n      });\n    }\n  },\n  addProductImage: function addProductImage(_ref5, params) {\n    var commit = _ref5.commit;\n\n    if (params.img && params.img != '') {\n      commit('addProductImage', params.img);\n    }\n  },\n  removeProductImage: function removeProductImage(_ref6, params) {\n    var commit = _ref6.commit;\n\n    if (params.img && params.img != '') {\n      var img_file = params.img.replace(/^.*[\\\\/]/, '');\n      axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n      axios.delete(delete_img_url + '/' + img_file, state.product).then(function (response) {\n        if (response.data.status == \"success\") commit('removeProductImage', response.data.filename);else commit('removeProductImage', params.img);\n      });\n    }\n  }\n};\nexport default {\n  namespaced: true,\n  state: state,\n  getters: getters,\n  actions: actions,\n  mutations: mutations\n};",{"version":3,"sources":["/Users/mattiasronge/Desktop/richar/Admin/src/store/modules/api_product.js"],"names":["axios","url","process","env","VUE_APP_BACKEND_URL","delete_img_url","imageBaseUrl","state","products","product","type","location","area","ref_key","bathroom","bedroom","square","outside","images","getters","mutations","getProducts","posts","getProduct","post","_id","emptyProduct","addProductImage","img","push","removeProductImage","splice","indexOf","actions","commit","defaults","headers","common","get","then","response","data","context","params","id","deleteProduct","dispatch","delete","saveProduct","put","img_file","replace","status","filename","namespaced"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,IAAMC,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,mBAAZ,GAAgC,gBAA5C;AACA,IAAMC,cAAc,GAAGH,OAAO,CAACC,GAAR,CAAYC,mBAAZ,GAAgC,YAAvD;AACA,IAAME,YAAY,GAAGJ,OAAO,CAACC,GAAR,CAAYC,mBAAZ,GAAgC,SAArD;AACA,IAAMG,KAAK,GAAG;AACVC,EAAAA,QAAQ,EAAE,EADA;AAEVC,EAAAA,OAAO,EAAE;AACLC,IAAAA,IAAI,EAAC,EADA;AAELC,IAAAA,QAAQ,EAAC,EAFJ;AAGLC,IAAAA,IAAI,EAAC,EAHA;AAILC,IAAAA,OAAO,EAAC,EAJH;AAKLC,IAAAA,QAAQ,EAAC,EALJ;AAMLC,IAAAA,OAAO,EAAC,EANH;AAOLC,IAAAA,MAAM,EAAC,EAPF;AAQLC,IAAAA,OAAO,EAAC,EARH;AASLC,IAAAA,MAAM,EAAC;AATF;AAFC,CAAd,C,CAeA;;AACA,IAAMC,OAAO,GAAG,EAAhB,C,CAGA;;AACA,IAAMC,SAAS,GAAG;AACdC,EAAAA,WADc,uBACFd,KADE,EACKe,KADL,EACY;AACtBf,IAAAA,KAAK,CAACC,QAAN,GAAiBc,KAAjB;AACH,GAHa;AAIdC,EAAAA,UAJc,sBAIHhB,KAJG,EAIIiB,IAJJ,EAIU;AACpBjB,IAAAA,KAAK,CAACE,OAAN,GAAgBe,IAAhB;AACA,QAAIA,IAAI,CAACb,QAAL,CAAcc,GAAlB,EAAuBlB,KAAK,CAACE,OAAN,CAAcE,QAAd,GAAyBa,IAAI,CAACb,QAAL,CAAcc,GAAvC;AACvB,QAAID,IAAI,CAACZ,IAAL,CAAUa,GAAd,EAAmBlB,KAAK,CAACE,OAAN,CAAcG,IAAd,GAAqBY,IAAI,CAACZ,IAAL,CAAUa,GAA/B;AACnB,QAAID,IAAI,CAACd,IAAL,CAAUe,GAAd,EAAmBlB,KAAK,CAACE,OAAN,CAAcC,IAAd,GAAqBc,IAAI,CAACd,IAAL,CAAUe,GAA/B;AACtB,GATa;AAUdC,EAAAA,YAVc,wBAUDnB,KAVC,EAUM;AAChBA,IAAAA,KAAK,CAACE,OAAN,GAAgB;AACZC,MAAAA,IAAI,EAAC,EADO;AAEZC,MAAAA,QAAQ,EAAC,EAFG;AAGZC,MAAAA,IAAI,EAAC,EAHO;AAIZC,MAAAA,OAAO,EAAC,EAJI;AAKZC,MAAAA,QAAQ,EAAC,EALG;AAMZC,MAAAA,OAAO,EAAC,EANI;AAOZC,MAAAA,MAAM,EAAC,EAPK;AAQZC,MAAAA,OAAO,EAAC,EARI;AASZC,MAAAA,MAAM,EAAC;AATK,KAAhB;AAWH,GAtBa;AAuBdS,EAAAA,eAvBc,2BAuBEpB,KAvBF,EAuBSqB,GAvBT,EAuBc;AACxBrB,IAAAA,KAAK,CAACE,OAAN,CAAcS,MAAd,CAAqBW,IAArB,CAA0BvB,YAAY,GAACsB,GAAvC;AACH,GAzBa;AA0BdE,EAAAA,kBA1Bc,8BA0BKvB,KA1BL,EA0BYqB,GA1BZ,EA0BiB;AAC3BrB,IAAAA,KAAK,CAACE,OAAN,CAAcS,MAAd,CAAqBa,MAArB,CAA4BxB,KAAK,CAACE,OAAN,CAAcS,MAAd,CAAqBc,OAArB,CAA6BJ,GAA7B,CAA5B,EAA+D,CAA/D;AACH;AA5Ba,CAAlB,C,CA+BA;;AACA,IAAMK,OAAO,GAAG;AACZZ,EAAAA,WADY,6BACU;AAAA,QAATa,MAAS,QAATA,MAAS;AAClBlC,IAAAA,KAAK,CAACmC,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,6BAA9B,IAA+D,GAA/D;AACArC,IAAAA,KAAK,CAACsC,GAAN,CAAUrC,GAAV,EAAesC,IAAf,CAAoB,UAACC,QAAD,EAAc;AAC9B;AACAN,MAAAA,MAAM,CAAC,aAAD,EAAgBM,QAAQ,CAACC,IAAzB,CAAN;AACH,KAHD;AAIH,GAPW;AAQZlB,EAAAA,UARY,sBAQDmB,OARC,EAQQC,MARR,EAQgB;AACxB3C,IAAAA,KAAK,CAACmC,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,6BAA9B,IAA+D,GAA/D;AACArC,IAAAA,KAAK,CAACsC,GAAN,CAAUrC,GAAG,GAAC,GAAJ,GAAQ0C,MAAM,CAACC,EAAzB,EAA6BL,IAA7B,CAAkC,UAACC,QAAD,EAAc;AAC5CE,MAAAA,OAAO,CAACR,MAAR,CAAe,YAAf,EAA6BM,QAAQ,CAACC,IAAtC;AACH,KAFD;AAGH,GAbW;AAcZf,EAAAA,YAdY,+BAcW;AAAA,QAATQ,MAAS,SAATA,MAAS;AACnBA,IAAAA,MAAM,CAAC,cAAD,CAAN;AACH,GAhBW;AAiBZW,EAAAA,aAjBY,gCAiBcF,MAjBd,EAiBsB;AAAA,QAAnBG,QAAmB,SAAnBA,QAAmB;AAC9B9C,IAAAA,KAAK,CAACmC,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,6BAA9B,IAA+D,GAA/D;AACArC,IAAAA,KAAK,CAAC+C,MAAN,CAAa9C,GAAG,GAAC,GAAJ,GAAQ0C,MAAM,CAACC,EAA5B,EAAgCL,IAAhC,CAAqC,UAACC,QAAD,EAAc;AAC/CM,MAAAA,QAAQ,CAAC,aAAD,EAAgBN,QAAQ,CAACC,IAAzB,CAAR;AACH,KAFD;AAGH,GAtBW;AAuBZO,EAAAA,WAvBY,8BAuBYL,MAvBZ,EAuBoB;AAAA,QAAnBG,QAAmB,SAAnBA,QAAmB;;AAC5B;AACA;AACA,QAAIH,MAAM,CAACC,EAAP,IAAaD,MAAM,CAACC,EAAP,IAAW,EAA5B,EACA;AACI;AACA5C,MAAAA,KAAK,CAACmC,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,6BAA9B,IAA+D,GAA/D;AACArC,MAAAA,KAAK,CAACiD,GAAN,CAAUhD,GAAG,GAAC,GAAJ,GAAQ0C,MAAM,CAACC,EAAzB,EAA6BrC,KAAK,CAACE,OAAnC,EAA4C8B,IAA5C,CAAiD,UAACC,QAAD,EAAc;AAC3DM,QAAAA,QAAQ,CAAC,aAAD,EAAgBN,QAAQ,CAACC,IAAzB,CAAR;AACH,OAFD;AAGH,KAPD,MAOO;AACH;AACAzC,MAAAA,KAAK,CAACmC,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,6BAA9B,IAA+D,GAA/D;AACArC,MAAAA,KAAK,CAACwB,IAAN,CAAWvB,GAAX,EAAgBM,KAAK,CAACE,OAAtB,EAA+B8B,IAA/B,CAAoC,UAACC,QAAD,EAAc;AAC9CM,QAAAA,QAAQ,CAAC,aAAD,EAAgBN,QAAQ,CAACC,IAAzB,CAAR;AACH,OAFD;AAGH;AACJ,GAxCW;AAyCZd,EAAAA,eAzCY,kCAyCcgB,MAzCd,EAyCsB;AAAA,QAAjBT,MAAiB,SAAjBA,MAAiB;;AAC9B,QAAIS,MAAM,CAACf,GAAP,IAAce,MAAM,CAACf,GAAP,IAAY,EAA9B,EACA;AACIM,MAAAA,MAAM,CAAC,iBAAD,EAAoBS,MAAM,CAACf,GAA3B,CAAN;AACH;AACJ,GA9CW;AA+CZE,EAAAA,kBA/CY,qCA+CiBa,MA/CjB,EA+CyB;AAAA,QAAjBT,MAAiB,SAAjBA,MAAiB;;AACjC,QAAIS,MAAM,CAACf,GAAP,IAAce,MAAM,CAACf,GAAP,IAAY,EAA9B,EACA;AACI,UAAIsB,QAAQ,GAAGP,MAAM,CAACf,GAAP,CAAWuB,OAAX,CAAmB,UAAnB,EAA+B,EAA/B,CAAf;AACAnD,MAAAA,KAAK,CAACmC,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,6BAA9B,IAA+D,GAA/D;AACArC,MAAAA,KAAK,CAAC+C,MAAN,CAAa1C,cAAc,GAAC,GAAf,GAAmB6C,QAAhC,EAA0C3C,KAAK,CAACE,OAAhD,EAAyD8B,IAAzD,CAA8D,UAACC,QAAD,EAAc;AACxE,YAAIA,QAAQ,CAACC,IAAT,CAAcW,MAAd,IAAsB,SAA1B,EACIlB,MAAM,CAAC,oBAAD,EAAuBM,QAAQ,CAACC,IAAT,CAAcY,QAArC,CAAN,CADJ,KAGInB,MAAM,CAAC,oBAAD,EAAuBS,MAAM,CAACf,GAA9B,CAAN;AACP,OALD;AAMH;AACJ;AA3DW,CAAhB;AA8DA,eAAe;AACd0B,EAAAA,UAAU,EAAE,IADE;AAEd/C,EAAAA,KAAK,EAALA,KAFc;AAGdY,EAAAA,OAAO,EAAPA,OAHc;AAIdc,EAAAA,OAAO,EAAPA,OAJc;AAKdb,EAAAA,SAAS,EAATA;AALc,CAAf","sourcesContent":["import axios from 'axios'\r\nconst url = process.env.VUE_APP_BACKEND_URL+\"api/productapi\";\r\nconst delete_img_url = process.env.VUE_APP_BACKEND_URL+\"api/delete\";\r\nconst imageBaseUrl = process.env.VUE_APP_BACKEND_URL+'images/';\r\nconst state = {\r\n    products: [],\r\n    product: {\r\n        type:'',\r\n        location:'',\r\n        area:'',\r\n        ref_key:'',\r\n        bathroom:'',\r\n        bedroom:'',\r\n        square:'',\r\n        outside:'',\r\n        images:[]\r\n    }\r\n}\r\n\r\n// getters\r\nconst getters = {\r\n\r\n}\r\n// mutations\r\nconst mutations = {\r\n    getProducts(state, posts) {\r\n        state.products = posts\r\n    },\r\n    getProduct(state, post) {\r\n        state.product = post\r\n        if (post.location._id) state.product.location = post.location._id;\r\n        if (post.area._id) state.product.area = post.area._id;\r\n        if (post.type._id) state.product.type = post.type._id;\r\n    },\r\n    emptyProduct(state) {\r\n        state.product = {\r\n            type:'',\r\n            location:'',\r\n            area:'',\r\n            ref_key:'',\r\n            bathroom:'',\r\n            bedroom:'',\r\n            square:'',\r\n            outside:'',\r\n            images:[],\r\n        };\r\n    },\r\n    addProductImage(state, img) {\r\n        state.product.images.push(imageBaseUrl+img);\r\n    },\r\n    removeProductImage(state, img) {\r\n        state.product.images.splice(state.product.images.indexOf(img), 1);\r\n    }\r\n};\r\n\r\n// actions\r\nconst actions = {\r\n    getProducts({commit}) {\r\n        axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\r\n        axios.get(url).then((response) => {\r\n            //console.log(response.data);\r\n            commit('getProducts', response.data);\r\n        });\r\n    },\r\n    getProduct(context, params) {\r\n        axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\r\n        axios.get(url+'/'+params.id).then((response) => {\r\n            context.commit('getProduct', response.data);\r\n        });\r\n    },\r\n    emptyProduct({commit}) {\r\n        commit('emptyProduct');\r\n    },\r\n    deleteProduct({dispatch}, params) {\r\n        axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\r\n        axios.delete(url+'/'+params.id).then((response) => {\r\n            dispatch('getProducts', response.data)\r\n        });\r\n    },\r\n    saveProduct({dispatch}, params) {\r\n        // console.log('=== save product ===');\r\n        // console.log(state.product);\r\n        if (params.id && params.id!='')\r\n        {\r\n            //edit product\r\n            axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\r\n            axios.put(url+'/'+params.id, state.product).then((response) => {\r\n                dispatch('getProducts', response.data)\r\n            });\r\n        } else {\r\n            //insert product\r\n            axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\r\n            axios.post(url, state.product).then((response) => {\r\n                dispatch('getProducts', response.data)\r\n            });\r\n        }\r\n    },\r\n    addProductImage({commit}, params) {\r\n        if (params.img && params.img!='')\r\n        {\r\n            commit('addProductImage', params.img);\r\n        }\r\n    },\r\n    removeProductImage({commit}, params) {\r\n        if (params.img && params.img!='')\r\n        {\r\n            let img_file = params.img.replace(/^.*[\\\\/]/, '');\r\n            axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\r\n            axios.delete(delete_img_url+'/'+img_file, state.product).then((response) => {\r\n                if (response.data.status==\"success\")\r\n                    commit('removeProductImage', response.data.filename);\r\n                else\r\n                    commit('removeProductImage', params.img);\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport default {\r\n\tnamespaced: true,\r\n\tstate,\r\n\tgetters,\r\n\tactions,\r\n\tmutations\r\n}"]}]}