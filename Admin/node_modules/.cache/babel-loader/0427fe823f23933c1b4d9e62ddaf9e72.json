{"remainingRequest":"/Users/mattiasronge/Desktop/richar/Admin/node_modules/babel-loader/lib/index.js!/Users/mattiasronge/Desktop/richar/Admin/node_modules/eslint-loader/index.js??ref--13-0!/Users/mattiasronge/Desktop/richar/Admin/src/store/modules/api.js","dependencies":[{"path":"/Users/mattiasronge/Desktop/richar/Admin/src/store/modules/api.js","mtime":1577242261937},{"path":"/Users/mattiasronge/Desktop/richar/Admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mattiasronge/Desktop/richar/Admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mattiasronge/Desktop/richar/Admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport axios from 'axios';\nvar url = process.env.VUE_APP_BACKEND_URL + 'api/';\nvar state = {\n  isLoading: false,\n  country: '',\n  provinceArea: '',\n  locations: [],\n  types: [],\n  property_list: [],\n  ref_keys: [],\n  totalCount: 0,\n  totalPages: 1,\n  product: {\n    title: '',\n    description: '',\n    description_2: '',\n    type: '',\n    location: '',\n    area: '',\n    ref_key: '',\n    bathroom: '',\n    bedroom: '',\n    square: '',\n    outside: '',\n    price: 0,\n    images: []\n  }\n}; // getters\n\nvar getters = {}; // mutations\n\nvar mutations = {\n  getLocations: function getLocations(state, data) {\n    state.locations = data; //console.log(data);\n  },\n  getAreas: function getAreas(state, data) {\n    state.areas = data; //console.log(data);\n  },\n  getTypes: function getTypes(state, data) {\n    state.types = data; //console.log(data);\n  },\n  getLocations_fromAPI: function getLocations_fromAPI(state, data) {\n    if (data.LocationData) {\n      state.country = data.LocationData.Country;\n      state.provinceArea = data.LocationData.ProvinceArea.ProvinceAreaName;\n      state.locations = data.LocationData.ProvinceArea.Locations.Location; //console.log(state.locations);\n    }\n  },\n  getTypes_fromAPI: function getTypes_fromAPI(state, data) {\n    if (data.PropertyTypes) {\n      var items = [];\n      data.PropertyTypes.PropertyType.forEach(function (item) {\n        items.push({\n          name: item.Type,\n          code: item.OptionValue\n        });\n      });\n      state.types = items;\n    } //console.log(state.types);\n\n  },\n  getRefKeys: function getRefKeys(state, data) {\n    state.ref_keys = data;\n  },\n  emptyProduct: function emptyProduct(state) {\n    state.product = {\n      title: '',\n      description: '',\n      description_2: '',\n      type: '',\n      location: '',\n      area: '',\n      ref_key: '',\n      bathroom: '',\n      bedroom: '',\n      square: '',\n      outside: '',\n      price: 0,\n      images: []\n    };\n  },\n  saveProduct: function saveProduct(state, data) {\n    state.product = data;\n    state.isLoading = false;\n  },\n  getPropery: function getPropery(state, data) {\n    if (data.Property) {\n      var item = data.Property;\n      var temp = {\n        ref_key: item.Reference,\n        title: item.PropertyType.NameType + ' in ' + item.Location + ', ' + item.Area + ', ' + item.Province,\n        description: item.Description,\n        price: item.Price,\n        bedroom: item.Bedrooms,\n        bathroom: item.Bathrooms,\n        square: item.Built,\n        outside: item.GardenPlot,\n        // Province: item.Province,\n        location: item.Location,\n        area: item.Area,\n        type: item.PropertyType.TypeId // type: item.PropertyType.Type,\n        // Subtype1: item.PropertyType.Adosada,\n        // SubtypeId1: item.PropertyType.SubtypeId1,\n        // Status: item.Status.system,\n        // Pool: item.Pool,\n        // Parking: item.Parking,\n        // Garden: item.Garden,\n        // GardenPlot: item.GardenPlot,\n        // BuiltYear: item.BuiltYear,\n        // Currency: item.Currency,\n        // stars:item.PropertyFeatures.Category.length>5 ? 5:item.PropertyFeatures.Category.length\n\n      };\n\n      if (item.PropertyType.SubtypeId1) {\n        temp['type'] = item.PropertyType.SubtypeId1;\n      }\n\n      var categories = \"<ul>\";\n\n      if (item.PropertyFeatures.Category) {\n        item.PropertyFeatures.Category.forEach(function (cate) {\n          categories = categories + \"<li>\" + cate.Type + ': ' + cate.Value.join(', ') + \"</li>\";\n        });\n      }\n\n      categories += \"</ul>\";\n      temp['description_2'] = categories;\n      var images = [];\n      if (item.MainImage) images.push(item.MainImage);\n\n      if (item.Pictures) {\n        item.Pictures.Picture.forEach(function (picture) {\n          images.push(picture['PictureURL']);\n        });\n      }\n\n      temp['images'] = images;\n      state.product = temp;\n    }\n\n    state.isLoading = false; // console.log('get Property');\n    // console.log(state.product);\n  },\n  getList: function getList(state, data) {\n    state.totalCount = data.QueryInfo.PropertyCount;\n    state.totalPages = Math.ceil(state.totalCount / 5);\n\n    if (data.Property) {\n      var items = [];\n      data.Property.forEach(function (item) {\n        var temp = {\n          ref_key: item.Reference,\n          title: item.PropertyType.NameType + ' in ' + item.Location + ', ' + item.Area + ', ' + item.Province,\n          Location: item.Location,\n          Area: item.Area,\n          Type: item.PropertyType.Type,\n          Status: item.Status.system,\n          Bedrooms: item.Bedrooms,\n          Bathrooms: item.Bathrooms,\n          Currency: item.Currency,\n          Price: item.Price,\n          Description: item.Description,\n          Built: item.Built,\n          GardenPlot: item.GardenPlot,\n          stars: item.PropertyFeatures.Category.length > 5 ? 5 : item.PropertyFeatures.Category.length\n        };\n        var images = [];\n        if (item.MainImage) images.push({\n          src: item.MainImage\n        });\n\n        if (item.Pictures) {\n          item.Pictures.Picture.forEach(function (picture) {\n            images.push({\n              src: picture['PictureURL']\n            });\n          });\n        }\n\n        temp['images'] = images;\n        items.push(temp);\n      });\n      state.property_list = items;\n    }\n\n    state.isLoading = false;\n  }\n}; // actions\n\nvar actions = {\n  getLocations: function getLocations(_ref) {\n    var commit = _ref.commit;\n    axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n    axios.get(url + 'categlocation').then(function (response) {\n      commit('getLocations', response.data);\n    });\n  },\n  getAreas: function getAreas(_ref2) {\n    var commit = _ref2.commit;\n    axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n    axios.get(url + 'categarea').then(function (response) {\n      commit('getAreas', response.data);\n    });\n  },\n  getTypes: function getTypes(_ref3) {\n    var commit = _ref3.commit;\n    axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n    axios.get(url + 'categtype').then(function (response) {\n      commit('getTypes', response.data);\n    });\n  },\n  getLocations_fromAPI: function getLocations_fromAPI(_ref4) {\n    var commit = _ref4.commit;\n    var params = {\n      url: 'SearchLocations',\n      p_agency_filterid: '1',\n      P_sandbox: 'true',\n      P_Lang: '1'\n    };\n    axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n    axios.post(url + 'productapi/getdata', params).then(function (response) {\n      commit('getLocations_fromAPI', response.data);\n    });\n  },\n  getTypes_fromAPI: function getTypes_fromAPI(_ref5) {\n    var commit = _ref5.commit;\n    var params = {\n      url: 'SearchPropertyTypes',\n      p_agency_filterid: '1',\n      P_sandbox: 'true',\n      P_Lang: '1'\n    };\n    axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n    axios.post(url + 'productapi/getdata', params).then(function (response) {\n      commit('getTypes_fromAPI', response.data);\n    });\n  },\n  getRefKeys: function getRefKeys(_ref6) {\n    var commit = _ref6.commit;\n    axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n    axios.get(url + 'productapi/refkey').then(function (response) {\n      commit('getRefKeys', response.data);\n    });\n  },\n  getPropery: function getPropery(_ref7, p) {\n    var commit = _ref7.commit,\n        dispatch = _ref7.dispatch;\n    state.isLoading = true;\n    var params = {\n      url: 'PropertyDetails',\n      p_agency_filterid: '1',\n      P_sandbox: 'true',\n      P_Lang: '1',\n      P_RefId: p.id,\n      P_ShowGPSCoords: 'TRUE',\n      P_showdecree218: 'YES'\n    };\n    axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n    axios.post(url + 'productapi/getdata', params).then(function (response) {\n      commit('getPropery', response.data);\n      dispatch('saveProduct', state.product);\n    }).catch(function (error) {\n      state.isLoading = false;\n      console.log(error);\n    });\n  },\n  emptyProduct: function emptyProduct(_ref8) {\n    var commit = _ref8.commit;\n    commit('emptyProduct');\n  },\n  saveProduct: function saveProduct(_ref9, product) {\n    var commit = _ref9.commit,\n        dispatch = _ref9.dispatch;\n    var isFound = false;\n\n    if (state.types) {\n      state.types.forEach(function (t) {\n        if (t.type_id == product.type) {\n          product.type = t._id;\n          isFound = true;\n        }\n      });\n    }\n\n    if (!isFound) product.type = \"5e020c2e67a67f16d4324f95\";\n    isFound = false;\n\n    if (state.locations) {\n      state.locations.forEach(function (t) {\n        if (t.title == product.location) {\n          product.location = t._id;\n          isFound = true;\n        }\n      });\n    }\n\n    if (!isFound) product.location = \"5dee5b2f2fb4423f1c16a415\";\n    isFound = false;\n\n    if (state.areas) {\n      state.areas.forEach(function (t) {\n        if (t.title == product.area) {\n          product.area = t._id;\n          isFound = true;\n        }\n      });\n    }\n\n    if (!isFound) product.area = \"5dee5bc52fb4423f1c16a418\";\n    state.isLoading = true;\n    axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n    axios.post(url + 'productapi', product).then(function (response) {\n      commit('saveProduct', response);\n      dispatch('getRefKeys');\n    }).catch(function (error) {\n      state.isLoading = false;\n      console.log(error);\n    });\n  },\n  getList: function getList(_ref10, p) {\n    var commit = _ref10.commit;\n    state.isLoading = true;\n    var params = {\n      url: 'SearchProperties',\n      p_agency_filterid: '1',\n      P_sandbox: 'true',\n      P_PageSize: 5,\n      P_Lang: '1'\n    };\n    params['P_agency_filterid'] = p.period;\n    params['P_Min'] = p.minPrice;\n    params['P_Max'] = p.maxPrice;\n\n    if (p.bedrooms > 0) {\n      params['P_Beds'] = p.bedrooms;\n    }\n\n    if (p.baths > 0) {\n      params['P_Baths'] = p.baths;\n    }\n\n    if (p.types.length > 0) {\n      params['P_PropertyTypes'] = p.types.join(',');\n    }\n\n    if (p.locations.length > 0) {\n      params['P_Location'] = p.locations.join(',');\n    }\n\n    if (p.page > 0) {\n      params['P_PageNo'] = p.page;\n    }\n\n    axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n    axios.post(url + 'productapi/getdata', params).then(function (response) {\n      commit('getList', response.data);\n    }).catch(function (error) {\n      state.isLoading = false;\n      console.log(error);\n    });\n  }\n};\nexport default {\n  namespaced: true,\n  state: state,\n  getters: getters,\n  actions: actions,\n  mutations: mutations\n};",{"version":3,"sources":["/Users/mattiasronge/Desktop/richar/Admin/src/store/modules/api.js"],"names":["axios","url","process","env","VUE_APP_BACKEND_URL","state","isLoading","country","provinceArea","locations","types","property_list","ref_keys","totalCount","totalPages","product","title","description","description_2","type","location","area","ref_key","bathroom","bedroom","square","outside","price","images","getters","mutations","getLocations","data","getAreas","areas","getTypes","getLocations_fromAPI","LocationData","Country","ProvinceArea","ProvinceAreaName","Locations","Location","getTypes_fromAPI","PropertyTypes","items","PropertyType","forEach","item","push","name","Type","code","OptionValue","getRefKeys","emptyProduct","saveProduct","getPropery","Property","temp","Reference","NameType","Area","Province","Description","Price","Bedrooms","Bathrooms","Built","GardenPlot","TypeId","SubtypeId1","categories","PropertyFeatures","Category","cate","Value","join","MainImage","Pictures","Picture","picture","getList","QueryInfo","PropertyCount","Math","ceil","Status","system","Currency","stars","length","src","actions","commit","defaults","headers","common","get","then","response","params","p_agency_filterid","P_sandbox","P_Lang","post","p","dispatch","P_RefId","id","P_ShowGPSCoords","P_showdecree218","catch","error","console","log","isFound","t","type_id","_id","P_PageSize","period","minPrice","maxPrice","bedrooms","baths","page","namespaced"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\n\r\nconst url = process.env.VUE_APP_BACKEND_URL+'api/';\r\nconst state = {\r\n    isLoading:false,\r\n    country:'',\r\n    provinceArea:'',\r\n    locations: [],\r\n    types: [],\r\n    property_list: [],\r\n    ref_keys: [],\r\n    totalCount:0,\r\n    totalPages:1,\r\n    product: {\r\n        title:'',\r\n        description:'',\r\n        description_2:'',\r\n        type:'',\r\n        location:'',\r\n        area:'',\r\n        ref_key:'',\r\n        bathroom:'',\r\n        bedroom:'',\r\n        square:'',\r\n        outside:'',\r\n        price:0,\r\n        images:[]\r\n    }\r\n}\r\n\r\n// getters\r\nconst getters = {\r\n\r\n}\r\n// mutations\r\nconst mutations = {\r\n    getLocations(state, data) {\r\n        state.locations = data;\r\n        //console.log(data);\r\n    },\r\n    getAreas(state, data) {\r\n        state.areas = data;\r\n        //console.log(data);\r\n    },\r\n    getTypes(state, data) {\r\n        state.types = data;\r\n        //console.log(data);\r\n    },\r\n    getLocations_fromAPI(state, data) {\r\n        if (data.LocationData) {\r\n            state.country = data.LocationData.Country; \r\n            state.provinceArea = data.LocationData.ProvinceArea.ProvinceAreaName; \r\n            state.locations = data.LocationData.ProvinceArea.Locations.Location;\r\n            //console.log(state.locations);\r\n        }\r\n    },\r\n    getTypes_fromAPI(state, data) {\r\n        if (data.PropertyTypes) {\r\n            let items = [];\r\n            data.PropertyTypes.PropertyType.forEach(item => {\r\n                items.push({name:item.Type, code:item.OptionValue});\r\n            });\r\n            state.types = items;\r\n        }\r\n        //console.log(state.types);\r\n    },\r\n    getRefKeys(state, data) {\r\n        state.ref_keys = data;\r\n    },\r\n    emptyProduct(state) {\r\n        state.product = {\r\n            title:'',\r\n            description:'',\r\n            description_2:'',\r\n            type:'',\r\n            location:'',\r\n            area:'',\r\n            ref_key:'',\r\n            bathroom:'',\r\n            bedroom:'',\r\n            square:'',\r\n            outside:'',\r\n            price: 0,\r\n            images:[],\r\n        };\r\n    },\r\n    saveProduct(state, data) {\r\n        state.product = data;\r\n        state.isLoading = false;\r\n    },\r\n    getPropery(state, data) {\r\n        if (data.Property) {\r\n            let item = data.Property;\r\n            let temp = {\r\n                ref_key: item.Reference,\r\n                title: item.PropertyType.NameType + ' in '+ item.Location + ', ' + item.Area + ', ' + item.Province,\r\n                description: item.Description,\r\n                price: item.Price,\r\n                bedroom: item.Bedrooms,\r\n                bathroom: item.Bathrooms,\r\n                square: item.Built,\r\n                outside: item.GardenPlot,\r\n                // Province: item.Province,\r\n                location: item.Location,\r\n                area: item.Area,\r\n                type: item.PropertyType.TypeId,\r\n                // type: item.PropertyType.Type,\r\n                // Subtype1: item.PropertyType.Adosada,\r\n                // SubtypeId1: item.PropertyType.SubtypeId1,\r\n                // Status: item.Status.system,\r\n                // Pool: item.Pool,\r\n                // Parking: item.Parking,\r\n                // Garden: item.Garden,\r\n                // GardenPlot: item.GardenPlot,\r\n                // BuiltYear: item.BuiltYear,\r\n                // Currency: item.Currency,\r\n                // stars:item.PropertyFeatures.Category.length>5 ? 5:item.PropertyFeatures.Category.length\r\n            };\r\n            if (item.PropertyType.SubtypeId1) {\r\n                temp['type'] = item.PropertyType.SubtypeId1;\r\n            }\r\n            let categories = \"<ul>\";\r\n            if (item.PropertyFeatures.Category) {\r\n                item.PropertyFeatures.Category.forEach((cate) => {\r\n                    categories = categories+\"<li>\" + cate.Type+': '+cate.Value.join(', ') + \"</li>\";\r\n                });\r\n            }\r\n            categories += \"</ul>\";\r\n            temp['description_2'] = categories;\r\n\r\n            let images = [];\r\n            if (item.MainImage)\r\n                images.push(item.MainImage);\r\n            if (item.Pictures) {\r\n                item.Pictures.Picture.forEach((picture) => {\r\n                    images.push(picture['PictureURL']);\r\n                });\r\n            }\r\n            temp['images'] = images;\r\n            state.product = temp;\r\n        }\r\n        state.isLoading = false;\r\n        // console.log('get Property');\r\n        // console.log(state.product);\r\n    },\r\n    getList(state, data) {\r\n        state.totalCount = data.QueryInfo.PropertyCount;\r\n        state.totalPages = Math.ceil(state.totalCount/5);\r\n        if (data.Property) {\r\n            let items = [];\r\n            data.Property.forEach(item => {\r\n                let temp = {\r\n                    ref_key: item.Reference,\r\n                    title: item.PropertyType.NameType + ' in '+ item.Location + ', ' + item.Area + ', ' + item.Province,\r\n                    Location: item.Location,\r\n                    Area: item.Area,\r\n                    Type: item.PropertyType.Type,\r\n                    Status: item.Status.system,\r\n                    Bedrooms: item.Bedrooms,\r\n                    Bathrooms: item.Bathrooms,\r\n                    Currency: item.Currency,\r\n                    Price: item.Price,\r\n                    Description: item.Description,\r\n                    Built: item.Built,\r\n                    GardenPlot: item.GardenPlot,\r\n                    stars:item.PropertyFeatures.Category.length>5 ? 5:item.PropertyFeatures.Category.length\r\n                };\r\n                let images = [];\r\n                if (item.MainImage)\r\n                    images.push({src: item.MainImage});\r\n                if (item.Pictures) {\r\n                    item.Pictures.Picture.forEach((picture) => {\r\n                        images.push({src: picture['PictureURL']});\r\n                    });\r\n                }\r\n                temp['images'] = images;\r\n                items.push(temp);\r\n            });\r\n            state.property_list = items;\r\n        }\r\n        state.isLoading = false;\r\n    }\r\n};\r\n\r\n// actions\r\nconst actions = {\r\n    getLocations({commit}) {\r\n        axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\r\n        axios.get(url+'categlocation').then((response) => {\r\n            commit('getLocations', response.data);\r\n        });\r\n    },\r\n    getAreas({commit}) {\r\n        axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\r\n        axios.get(url+'categarea').then((response) => {\r\n            commit('getAreas', response.data);\r\n        });\r\n    },\r\n    getTypes({commit}) {\r\n        axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\r\n        axios.get(url+'categtype').then((response) => {\r\n            commit('getTypes', response.data);\r\n        });\r\n    },\r\n    getLocations_fromAPI({commit}) {\r\n        let params= {\r\n            url: 'SearchLocations',\r\n            p_agency_filterid: '1',\r\n            P_sandbox: 'true',\r\n            P_Lang: '1'\r\n        };\r\n        axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\r\n        axios.post(url+'productapi/getdata', params).then((response) => {\r\n            commit('getLocations_fromAPI', response.data);\r\n        });\r\n    },\r\n    getTypes_fromAPI({commit}) {\r\n        let params= {\r\n            url: 'SearchPropertyTypes',\r\n            p_agency_filterid: '1',\r\n            P_sandbox: 'true',\r\n            P_Lang: '1'\r\n        };\r\n        axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\r\n        axios.post(url+'productapi/getdata', params).then((response) => {\r\n            commit('getTypes_fromAPI', response.data);\r\n        });\r\n    },\r\n    getRefKeys({commit}) {\r\n        axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\r\n        axios.get(url+'productapi/refkey').then((response) => {\r\n            commit('getRefKeys', response.data);\r\n        });\r\n    },\r\n    getPropery({commit, dispatch}, p) {\r\n        state.isLoading = true;\r\n        let params= {\r\n            url: 'PropertyDetails',\r\n            p_agency_filterid: '1',\r\n            P_sandbox: 'true',\r\n            P_Lang: '1',\r\n            P_RefId: p.id,\r\n            P_ShowGPSCoords:'TRUE',\r\n            P_showdecree218: 'YES'\r\n        };\r\n        axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\r\n        axios.post(url+'productapi/getdata', params).then((response) => {\r\n            commit('getPropery', response.data);\r\n            dispatch('saveProduct', state.product);\r\n        }).catch(error => {\r\n            state.isLoading = false;\r\n            console.log(error)\r\n        });\r\n    },\r\n    emptyProduct({commit}) {\r\n        commit('emptyProduct');\r\n    },\r\n    saveProduct({commit, dispatch}, product) {\r\n        let isFound = false;\r\n        if (state.types) {\r\n            state.types.forEach(t=>{\r\n                if (t.type_id == product.type) {\r\n                    product.type = t._id;\r\n                    isFound = true;\r\n                }\r\n            });\r\n        }\r\n        if (!isFound) product.type = \"5e020c2e67a67f16d4324f95\";\r\n        isFound = false;\r\n        if (state.locations) {\r\n            state.locations.forEach(t=>{\r\n                if (t.title == product.location) {\r\n                    product.location = t._id;\r\n                    isFound = true;\r\n                }\r\n            });\r\n        }\r\n        if (!isFound) product.location = \"5dee5b2f2fb4423f1c16a415\";\r\n        isFound = false;\r\n        if (state.areas) {\r\n            state.areas.forEach(t=>{\r\n                if (t.title == product.area) {\r\n                    product.area = t._id;\r\n                    isFound = true;\r\n                }\r\n            });\r\n        }\r\n        if (!isFound) product.area = \"5dee5bc52fb4423f1c16a418\";\r\n        state.isLoading = true;\r\n        axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\r\n        axios.post(url+'productapi', product).then((response) => {\r\n            commit('saveProduct', response);\r\n            dispatch('getRefKeys');\r\n        }).catch(error => {\r\n            state.isLoading = false;\r\n            console.log(error)\r\n        });\r\n    },\r\n    getList({commit}, p) {\r\n        state.isLoading = true;\r\n        let params= {\r\n            url: 'SearchProperties',\r\n            p_agency_filterid: '1',\r\n            P_sandbox: 'true',\r\n            P_PageSize: 5,\r\n            P_Lang: '1'\r\n        };\r\n        params['P_agency_filterid'] = p.period;\r\n        params['P_Min'] = p.minPrice;\r\n        params['P_Max'] = p.maxPrice;\r\n        if ( p.bedrooms>0 ) {\r\n            params['P_Beds'] = p.bedrooms;\r\n        }\r\n        if ( p.baths>0 ) {\r\n            params['P_Baths'] = p.baths;\r\n        }\r\n        if ( p.types.length>0 ) {\r\n            params['P_PropertyTypes'] = p.types.join(',');\r\n        }\r\n        if ( p.locations.length>0 ) {\r\n            params['P_Location'] = p.locations.join(',');\r\n        }\r\n        if ( p.page>0 ) {\r\n            params['P_PageNo'] = p.page;\r\n        }\r\n        axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\r\n        axios.post(url+'productapi/getdata', params).then((response) => {\r\n            commit('getList', response.data);\r\n        }).catch(error => {\r\n            state.isLoading = false;\r\n            console.log(error)\r\n        });\r\n    },   \r\n}\r\n\r\nexport default {\r\n\tnamespaced: true,\r\n\tstate,\r\n\tgetters,\r\n\tactions,\r\n\tmutations\r\n}"]}]}