{"remainingRequest":"/Users/mattiasronge/Desktop/richar/Admin/node_modules/babel-loader/lib/index.js!/Users/mattiasronge/Desktop/richar/Admin/node_modules/eslint-loader/index.js??ref--13-0!/Users/mattiasronge/Desktop/richar/Admin/src/store/modules/manual_product.js","dependencies":[{"path":"/Users/mattiasronge/Desktop/richar/Admin/src/store/modules/manual_product.js","mtime":1577278719145},{"path":"/Users/mattiasronge/Desktop/richar/Admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mattiasronge/Desktop/richar/Admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mattiasronge/Desktop/richar/Admin/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport axios from 'axios';\nvar url = process.env.VUE_APP_BACKEND_URL + \"api/productmanual\";\nvar delete_img_url = process.env.VUE_APP_BACKEND_URL + \"api/delete\";\nvar imageBaseUrl = process.env.VUE_APP_BACKEND_URL + 'images/';\nvar state = {\n  products: [],\n  product: {\n    title: '',\n    description: '',\n    description_2: '',\n    type: '',\n    location: '',\n    area: '',\n    ref_key: '',\n    bathroom: 0,\n    bedroom: 0,\n    square: '',\n    outside: 0,\n    images: []\n  }\n}; // getters\n\nvar getters = {}; // mutations\n\nvar mutations = {\n  getProducts: function getProducts(state, posts) {\n    state.products = posts;\n  },\n  getProduct: function getProduct(state, post) {\n    state.product = post;\n    if (post.location._id) state.product.location = post.location._id;\n    if (post.area._id) state.product.area = post.area._id;\n    if (post.type._id) state.product.type = post.type._id;\n  },\n  emptyProduct: function emptyProduct(state) {\n    state.product = {\n      type: '',\n      location: '',\n      area: '',\n      ref_key: '',\n      bathroom: 0,\n      bedroom: 0,\n      square: '',\n      outside: 0,\n      images: []\n    };\n  },\n  addProductImage: function addProductImage(state, img) {\n    state.product.images.push(imageBaseUrl + img);\n  },\n  removeProductImage: function removeProductImage(state, img) {\n    state.product.images.splice(state.product.images.indexOf(img), 1);\n  }\n}; // actions\n\nvar actions = {\n  getProducts: function getProducts(_ref) {\n    var commit = _ref.commit;\n    axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n    axios.get(url).then(function (response) {\n      //console.log(response.data);\n      commit('getProducts', response.data);\n    });\n  },\n  getProduct: function getProduct(context, params) {\n    axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n    axios.get(url + '/' + params.id).then(function (response) {\n      context.commit('getProduct', response.data);\n    });\n  },\n  emptyProduct: function emptyProduct(_ref2) {\n    var commit = _ref2.commit;\n    commit('emptyProduct');\n  },\n  deleteProduct: function deleteProduct(_ref3, params) {\n    var dispatch = _ref3.dispatch;\n    axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n    axios.delete(url + '/' + params.id).then(function (response) {\n      dispatch('getProducts', response.data);\n    });\n  },\n  saveProduct: function saveProduct(_ref4, params) {\n    var dispatch = _ref4.dispatch;\n\n    // console.log('=== save product ===');\n    // console.log(state.product);\n    if (params.id && params.id != '') {\n      //edit product\n      axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n      axios.put(url + '/' + params.id, state.product).then(function (response) {\n        dispatch('getProducts', response.data);\n      });\n    } else {\n      //insert product\n      state.product.ref_key = 'M' + state.product.title.charAt(0).toUpperCase() + '_' + new Date().getTime();\n      axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n      axios.post(url, state.product).then(function (response) {\n        dispatch('getProducts', response.data);\n      });\n    }\n  },\n  addProductImage: function addProductImage(_ref5, params) {\n    var commit = _ref5.commit;\n\n    if (params.img && params.img != '') {\n      commit('addProductImage', params.img);\n    }\n  },\n  removeProductImage: function removeProductImage(_ref6, params) {\n    var commit = _ref6.commit;\n\n    if (params.img && params.img != '') {\n      var img_file = params.img.replace(/^.*[\\\\/]/, '');\n      axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n      axios.delete(delete_img_url + '/' + img_file, state.product).then(function (response) {\n        if (response.data.status == \"success\") commit('removeProductImage', response.data.filename);else commit('removeProductImage', params.img);\n      });\n    }\n  }\n};\nexport default {\n  namespaced: true,\n  state: state,\n  getters: getters,\n  actions: actions,\n  mutations: mutations\n};",{"version":3,"sources":["/Users/mattiasronge/Desktop/richar/Admin/src/store/modules/manual_product.js"],"names":["axios","url","process","env","VUE_APP_BACKEND_URL","delete_img_url","imageBaseUrl","state","products","product","title","description","description_2","type","location","area","ref_key","bathroom","bedroom","square","outside","images","getters","mutations","getProducts","posts","getProduct","post","_id","emptyProduct","addProductImage","img","push","removeProductImage","splice","indexOf","actions","commit","defaults","headers","common","get","then","response","data","context","params","id","deleteProduct","dispatch","delete","saveProduct","put","charAt","toUpperCase","Date","getTime","img_file","replace","status","filename","namespaced"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nconst url = process.env.VUE_APP_BACKEND_URL+\"api/productmanual\";\r\nconst delete_img_url = process.env.VUE_APP_BACKEND_URL+\"api/delete\";\r\nconst imageBaseUrl = process.env.VUE_APP_BACKEND_URL+'images/';\r\nconst state = {\r\n    products: [],\r\n    product: {\r\n        title:'',\r\n        description:'',\r\n        description_2:'',\r\n        type:'',\r\n        location:'',\r\n        area:'',\r\n        ref_key:'',\r\n        bathroom: 0,\r\n        bedroom: 0,\r\n        square: '',\r\n        outside: 0,\r\n        images:[]\r\n    }\r\n}\r\n\r\n// getters\r\nconst getters = {\r\n\r\n}\r\n// mutations\r\nconst mutations = {\r\n    getProducts(state, posts) {\r\n        state.products = posts\r\n    },\r\n    getProduct(state, post) {\r\n        state.product = post\r\n        if (post.location._id) state.product.location = post.location._id;\r\n        if (post.area._id) state.product.area = post.area._id;\r\n        if (post.type._id) state.product.type = post.type._id;\r\n    },\r\n    emptyProduct(state) {\r\n        state.product = {\r\n            type:'',\r\n            location:'',\r\n            area:'',\r\n            ref_key:'',\r\n            bathroom: 0,\r\n            bedroom: 0,\r\n            square:'',\r\n            outside: 0,\r\n            images:[],\r\n        };\r\n    },\r\n    addProductImage(state, img) {\r\n        state.product.images.push(imageBaseUrl+img);\r\n    },\r\n    removeProductImage(state, img) {\r\n        state.product.images.splice(state.product.images.indexOf(img), 1);\r\n    }\r\n};\r\n\r\n// actions\r\nconst actions = {\r\n    getProducts({commit}) {\r\n        axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\r\n        axios.get(url).then((response) => {\r\n            //console.log(response.data);\r\n            commit('getProducts', response.data);\r\n        });\r\n    },\r\n    getProduct(context, params) {\r\n        axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\r\n        axios.get(url+'/'+params.id).then((response) => {\r\n            context.commit('getProduct', response.data);\r\n        });\r\n    },\r\n    emptyProduct({commit}) {\r\n        commit('emptyProduct');\r\n    },\r\n    deleteProduct({dispatch}, params) {\r\n        axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\r\n        axios.delete(url+'/'+params.id).then((response) => {\r\n            dispatch('getProducts', response.data)\r\n        });\r\n    },\r\n    saveProduct({dispatch}, params) {\r\n        // console.log('=== save product ===');\r\n        // console.log(state.product);\r\n        if (params.id && params.id!='')\r\n        {\r\n            //edit product\r\n            axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\r\n            axios.put(url+'/'+params.id, state.product).then((response) => {\r\n                dispatch('getProducts', response.data)\r\n            });\r\n        } else {\r\n            //insert product\r\n            state.product.ref_key = 'M' + state.product.title.charAt(0).toUpperCase() + '_' + new Date().getTime();\r\n            axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\r\n            axios.post(url, state.product).then((response) => {\r\n                dispatch('getProducts', response.data)\r\n            });\r\n        }\r\n    },\r\n    addProductImage({commit}, params) {\r\n        if (params.img && params.img!='')\r\n        {\r\n            commit('addProductImage', params.img);\r\n        }\r\n    },\r\n    removeProductImage({commit}, params) {\r\n        if (params.img && params.img!='')\r\n        {\r\n            let img_file = params.img.replace(/^.*[\\\\/]/, '');\r\n            axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\r\n            axios.delete(delete_img_url+'/'+img_file, state.product).then((response) => {\r\n                if (response.data.status==\"success\")\r\n                    commit('removeProductImage', response.data.filename);\r\n                else\r\n                    commit('removeProductImage', params.img);\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport default {\r\n\tnamespaced: true,\r\n\tstate,\r\n\tgetters,\r\n\tactions,\r\n\tmutations\r\n}"]}]}